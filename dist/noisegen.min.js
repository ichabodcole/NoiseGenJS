/*! noisegen 2013-07-02 */
!function(){var a,b,c,d,e,f,g,h={}.hasOwnProperty,i=function(a,b){function c(){this.constructor=a}for(var d in b)h.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};d=function(){function a(a,b){this.type=null!=b?b:"brown",this.input=a.createGain(),this.output=a.createGain(),this.instanceCount=0,this.bufferSize=4096,this.baseName="NoiseGen_audioprocess_0",this.namespace=null,this.audioProcessor=null,this._createInternalNodes(a),this._routeNodes(),this.setNoiseType(this.type),this._createProcessorNamespace()}return a.prototype._createInternalNodes=function(a){return this.audioProcessor=a.createScriptProcessor(this.bufferSize,1,2)},a.prototype._routeNodes=function(){return this.input.connect(this.output),this.audioProcessor.connect(this.output)},a.prototype._createProcessorNamespace=function(){var a;if(this.namespace=this.baseName+this.instanceCount,"undefined"!=typeof window[this.namespace]){for(a=[];window[this.namespace]&&(this.instanceCount++,this.namespace=baseName+this.instanceCount,!(this.instanceCount>=9));)a.push(void 0);return a}},a.prototype._createProcessorLoop=function(){var a=this;return this.audioProcessor.onaudioprocess=window[this.namespace]=function(b){var c,d,e;for(d=b.outputBuffer.getChannelData(0),e=b.outputBuffer.getChannelData(1),c=0;c<a.bufferSize;)d[c]=a.noise.update(),e[c]=a.noise.update(),c++;return null},null},a.prototype.start=function(){return this._createProcessorLoop()},a.prototype.stop=function(){return this.audioProcessor.onaudioprocess=window[this.namespace]=null},a.prototype.connect=function(a){return this.output.connect(a.input?a.input:a)},a.prototype.disconnect=function(){return this.output.disconnect()},a.prototype.setNoiseType=function(a){return this.type=a,this.noise=c.create(this.type)},a}(),c=function(){function b(){}return b.create=function(b){var c;return"white"===b?c=new f:"pink"===b?c=new e:"brown"===b?c=new a:(console.log("Defaulting to Brown noise"),c=new a),c},b}(),b=function(){function a(){}return a.prototype.update=function(){return"Not implemented"},a.prototype.random=function(){return 2*Math.random()-1},a}(),f=function(a){function b(){return g=b.__super__.constructor.apply(this,arguments)}return i(b,a),b.prototype.update=function(){return this.random()},b}(b),a=function(a){function b(){this.base=0}return i(b,a),b.prototype.update=function(){var a;return a=.1*this.random(),this.base+=a,(this.base<-1||this.base>1)&&(this.base-=a),this.base},b}(b),e=function(a){function b(){this.alpha=1,this.poles=5,this.multipliers=this.zeroFill([],this.poles),this.values=this.zeroFill([],this.poles),this.fillArrays()}return i(b,a),b.prototype.fillArrays=function(){var a,b,c,d,e,f,g,h,i;for(a=1,g=this.poles,c=0,e=g.length;e>c;c++)b=g[c],a=(b-this.alpha/2)*a/(b+1),this.multipliers[b]=a;for(h=5*this.poles,i=[],d=0,f=h.length;f>d;d++)b=h[d],i.push(this.update());return i},b.prototype.zeroFill=function(a,b){var c,d,e,f;for(f=[],d=0,e=b.length;e>d;d++)c=b[d],f.push(a[c]=0);return f},b.prototype.update=function(){var a,b,c,d,e;for(b=1*this.random(),e=this.poles,c=0,d=e.length;d>c;c++)a=e[c],b-=this.multipliers[a]*this.values[a];return this.values.unshift(b),this.values.pop(),.5*b},b}(b),"function"==typeof define&&define.amd?define(function(){return d}):"object"==typeof window&&"object"==typeof window.document&&(window.NoiseGen=d)}.call(this);